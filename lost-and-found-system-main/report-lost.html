<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report Lost Item - Lost & Found</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <script>
      (function() {
        try {
          const savedTheme = localStorage.getItem('theme');
          const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
          if (savedTheme === 'light' || (!savedTheme && !prefersDark)) {
            document.documentElement.classList.add('light-theme');
          } else {
            document.documentElement.classList.remove('light-theme');
          }
        } catch (e) { console.error("Error applying initial theme:", e); }
      })();
    </script>

    <link rel="stylesheet" href="report.css">
</head>
<body>
    <header class="header">
        <div class="header-container">
            <div class="header-left">
                <button id="menuBtn" class="menu-btn" aria-label="Toggle Menu" aria-expanded="false" aria-controls="navMenu">
                    <span class="bar"></span>
                    <span class="bar"></span>
                    <span class="bar"></span>
                </button>
                <a href="home.html" class="app-logo">
                    <i class="fas fa-search-location logo-icon"></i>
                    <h1 class="app-title">Lost & Found</h1>
                </a>
            </div>
             <div class="header-right">
                <label class="theme-switch" for="themeToggle" title="Toggle theme">
                    <input type="checkbox" id="themeToggle">
                    <span class="slider round">
                        <span class="slider-icon light"><i class="fas fa-sun"></i></span>
                        <span class="slider-icon dark"><i class="fas fa-moon"></i></span>
                    </span>
                </label>
                <a href="profile.html" class="profile-link" aria-label="View Profile">
                    <i class="fas fa-user-circle"></i>
                </a>
            </div>
        </div>
    </header>

    <div id="overlay" class="overlay"></div>

    <nav id="navMenu" class="nav-drawer" aria-hidden="true">
        <div class="nav-drawer-header">
            <h2 class="nav-drawer-title">Menu</h2>
        </div>
        <ul>
            <li><a href="home.html" class="nav-link"><i class="fas fa-home nav-icon"></i>Home</a></li>
            <li><a href="report-lost.html" class="nav-link active-page"><i class="fas fa-eye-slash nav-icon"></i>Report Lost Item</a></li>
            <li><a href="report-found.html" class="nav-link"><i class="fas fa-hand-holding-heart nav-icon"></i>Report Found Item</a></li>
            <li><a href="lost-items.html" class="nav-link"><i class="fas fa-list-ul nav-icon"></i>View Lost Items</a></li>
            <li><a href="found-items.html" class="nav-link"><i class="fas fa-box-open nav-icon"></i>View Found Items</a></li>
            <li><a href="claimed-items.html" class="nav-link"><i class="fas fa-history nav-icon"></i>View Claimed Items</a></li>
            <li><a href="contact.html" class="nav-link"><i class="fas fa-envelope nav-icon"></i>Contact Admin</a></li>
            <li><a href="profile.html" class="nav-link"><i class="fas fa-user-circle nav-icon"></i>My Profile</a></li>
        </ul>
         <div class="nav-footer">
            <button id="logoutButton" class="btn btn-tertiary btn-logout">
                <i class="fas fa-sign-out-alt nav-icon"></i>Logout
            </button>
         </div>
    </nav>

    <main class="report-main">
        <div class="main-content-container">
            <section class="report-form-card animate-on-load fade-in">
                <h2>Report a Lost Item</h2>
                <p class="subtitle">Help us find your item by providing as much detail as possible.</p>

                <form id="reportItemForm" novalidate>
                    <div id="formMessage" class="form-message" aria-live="assertive"></div>

                    <div class="form-grid">
                        <div class="form-column">
                            <div class="input-group floating">
                                <i class="input-icon fas fa-tag"></i>
                                <input type="text" id="itemName" name="itemName" required>
                                <label for="itemName">Item Name*</label>
                                <span class="input-error-message" aria-live="assertive"></span>
                            </div>

                            <div class="input-group floating">
                                <i class="input-icon fas fa-university"></i>
                                <select id="campus" name="campus" required>
                                    <option value="" disabled selected hidden></option>
                                    <option value="Sidist Kilo Campus">Sidist Kilo Campus</option>
                                    <option value="Arat Kilo Campus">Arat Kilo Campus</option>
                                    <option value="Amist Kilo Campus">Amist Kilo Campus</option>
                                    <option value="6 Kilo (AAiT) Campus">6 Kilo (AAiT) Campus</option>
                                    <option value="Tikur Anbessa Campus">Tikur Anbessa Campus</option>
                                    <option value="School of Commerce">School of Commerce</option>
                                    <option value="Kotebe Campus">Kotebe Campus</option>
                                    <option value="Other/Not Sure">Other/Not Sure</option>
                                </select>
                                <label for="campus">Last Seen Campus*</label>
                                <span class="input-error-message" aria-live="assertive"></span>
                            </div>

                            <div class="input-group floating">
                                <i class="input-icon fas fa-map-marker-alt"></i>
                                <input type="text" id="lastSeen" name="lastSeen" placeholder="E.g., Library Room 304, Cafeteria Table 5" required>
                                <label for="lastSeen">Last Seen Location*</label>
                                <span class="input-error-message" aria-live="assertive"></span>
                            </div>

                             <div class="input-group floating">
                                <i class="input-icon fas fa-calendar-alt"></i>
                                <input type="date" id="dateLost" name="dateLost" required>
                                <label for="dateLost">Date Lost*</label>
                                <span class="input-error-message" aria-live="assertive"></span>
                            </div>
                        </div>

                        <div class="form-column">
                            <div class="input-group floating textarea-group">
                                <i class="input-icon fas fa-align-left"></i>
                                <textarea id="description" name="description" rows="4" required></textarea>
                                <label for="description">Description*</label>
                                <span class="input-error-message" aria-live="assertive"></span>
                            </div>

                            <div class="input-group floating">
                                <i class="input-icon fas fa-phone-alt"></i>
                                <input type="text" id="contact" name="contact" placeholder="Valid Email or Phone Number" required>
                                <label for="contact">Your Contact Info*</label>
                                <span class="input-error-message" aria-live="assertive"></span>
                            </div>

                            <div class="input-group">
                                <label class="image-upload-label">Item Image (Optional but Recommended)</label>
                                <div class="image-upload-zone" id="imageUploadZone">
                                    <div class="upload-placeholder" id="uploadPlaceholder">
                                        <i class="fas fa-cloud-upload-alt upload-icon"></i>
                                        <p>Drag & Drop Image Here</p>
                                        <span>or</span>
                                        <button type="button" class="btn btn-secondary btn-browse" id="browseBtn">Browse Files</button>
                                    </div>
                                    <div class="image-preview-container" id="imagePreviewContainer" style="display: none;">
                                        <img src="#" alt="Image Preview" id="imagePreview" class="image-preview">
                                        <button type="button" class="btn-remove-image" id="removeImageBtn" aria-label="Remove image">
                                            <i class="fas fa-times"></i>
                                        </button>
                                    </div>
                                    <input type="file" id="imageFile" accept="image/png, image/jpeg, image/webp" style="display: none;">
                                </div>
                                <div id="uploadErrorMessage" class="input-error-message" aria-live="assertive"></div>
                            </div>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-primary btn-submit-report">
                        <span class="btn-text">Submit Lost Report</span>
                        <span class="spinner"></span>
                    </button>
                </form>
            </section>

            <section class="next-steps-card animate-on-load fade-in delay-1">
                <h3><i class="fas fa-clipboard-check"></i>What to Do When Your Item is Found</h3>
                <p>If someone reports finding your item, you will be notified via the contact method you provided. To ensure a safe and successful recovery, please follow these steps:</p>
                <ol>
                    <li>
                        <strong>Provide Proof of Ownership:</strong> Be prepared to prove the item is yours. You may be asked to provide photographic evidence (e.g., a photo of you with the item), a receipt, the item's serial number, or another unique identifier.
                    </li>
                    <li>
                        <strong>Arrange a Safe Meetup:</strong> Always arrange to meet the finder in a public, high-traffic area on campus. Good options include a library entrance, a student center, or near a campus security office. Avoid secluded locations.
                    </li>
                    <li>
                        <strong>Confirm Identity:</strong> For your security, the finder will be instructed to verify your identity. Please be ready to show your student or staff ID card to the finder to confirm that you are the person authorized to claim the item.
                    </li>
                </ol>
            </section>
        </div>
    </main>

    <footer class="footer">
        <p>&copy; <span id="currentYear"></span> Lost & Found System. All rights reserved.</p>
    </footer>

    <script type="module" src="report-lost.js"></script>
</body>
</html>